var Y=Object.defineProperty;var H=(h,t,e)=>t in h?Y(h,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):h[t]=e;var s=(h,t,e)=>H(h,typeof t!="symbol"?t+"":t,e);import"./modulepreload-polyfill-B5Qt9EMX.js";import{C as b,G as w,T as U,a as O,A as N}from"./HTMLText-BdaxDQUN.js";class F{constructor(t,e){s(this,"container");s(this,"x",0);s(this,"y",0);s(this,"width");s(this,"height");s(this,"graphics");this.width=t,this.height=e,this.container=new b,this.updateGraphics()}updateGraphics(){this.graphics&&this.container.removeChild(this.graphics),this.graphics=new w,this.graphics.beginFill(5164484),this.graphics.drawRoundedRect(0,0,this.width,this.height,5),this.graphics.endFill(),this.graphics.lineStyle(2,16777215,.8),this.graphics.drawRoundedRect(0,0,this.width,this.height,5),this.container.addChild(this.graphics)}setPosition(t,e){this.x=t,this.y=e,this.container.x=t,this.container.y=e}resize(t){this.width=t,this.updateGraphics()}getBounds(){return{left:this.x,right:this.x+this.width,top:this.y,bottom:this.y+this.height}}}class T{constructor(t){s(this,"container");s(this,"x",0);s(this,"y",0);s(this,"radius");s(this,"velocityX",0);s(this,"velocityY",0);s(this,"graphics");this.radius=t,this.container=new b,this.graphics=new w,this.graphics.beginFill(16777215),this.graphics.drawCircle(0,0,t),this.graphics.endFill(),this.graphics.lineStyle(2,2899536,.8),this.graphics.drawCircle(0,0,t),this.container.addChild(this.graphics)}setPosition(t,e){this.x=t,this.y=e,this.container.x=t,this.container.y=e}setVelocity(t,e){this.velocityX=t,this.velocityY=e}setVelocityAndAngle(t,e){this.velocityX=t*Math.sin(e),this.velocityY=-t*Math.cos(e)}setAngle(t){const e=Math.sqrt(this.velocityX*this.velocityX+this.velocityY*this.velocityY);this.velocityX=e*Math.sin(t),this.velocityY=-e*Math.cos(t)}reverseX(){this.velocityX=-this.velocityX}reverseY(){this.velocityY=-this.velocityY}update(){this.x+=this.velocityX,this.y+=this.velocityY,this.container.x=this.x,this.container.y=this.y}getBounds(){return{left:this.x-this.radius,right:this.x+this.radius,top:this.y-this.radius,bottom:this.y+this.radius}}checkCollisionWithPaddle(t){const e=this.getBounds(),i=t.getBounds();return e.left<i.right&&e.right>i.left&&e.top<i.bottom&&e.bottom>i.top}checkCollisionWithBrick(t){const e=this.getBounds(),i=t.getBounds();return e.left<i.right&&e.right>i.left&&e.top<i.bottom&&e.bottom>i.top}}class z{constructor(t,e,i){s(this,"container");s(this,"x",0);s(this,"y",0);s(this,"width");s(this,"height");s(this,"maxHealth");s(this,"health");s(this,"graphics");this.width=t,this.height=e,this.maxHealth=i,this.health=i,this.container=new b,this.updateGraphics()}updateGraphics(){this.graphics&&this.container.removeChild(this.graphics),this.graphics=new w;const t=[3066993,15844367,15105570,15158332,12597547],e=Math.max(0,this.health-1),i=t[e];this.graphics.beginFill(i),this.graphics.drawRoundedRect(0,0,this.width,this.height,3),this.graphics.endFill(),this.graphics.lineStyle(1,16777215,.3),this.graphics.drawRoundedRect(0,0,this.width,this.height,3),this.graphics.lineStyle(1,16777215,.6),this.graphics.drawRoundedRect(2,2,this.width-4,this.height-4,2),this.container.addChild(this.graphics)}setPosition(t,e){this.x=t,this.y=e,this.container.x=t,this.container.y=e}hit(){return this.health--,this.updateGraphics(),this.health<=0}getBounds(){return{left:this.x,right:this.x+this.width,top:this.y,bottom:this.y+this.height}}getColor(){const t=[3066993,15844367,15105570,15158332,12597547],e=Math.max(0,this.health-1);return t[e]}}var v=(h=>(h.PADDLE_INCREASE="paddle_increase",h.PADDLE_DECREASE="paddle_decrease",h.EXTRA_LIFE="extra_life",h))(v||{});class K{constructor(t,e,i){s(this,"container");s(this,"x",0);s(this,"y",0);s(this,"type");s(this,"width",30);s(this,"height",30);s(this,"velocityY",2);s(this,"graphics");s(this,"text");this.type=t,this.x=e,this.y=i,this.container=new b,this.createGraphics(),this.setPosition(e,i)}createGraphics(){this.graphics=new w;let t,e;switch(this.type){case"paddle_increase":t=3066993,e="+";break;case"paddle_decrease":t=15158332,e="-";break;case"extra_life":t=15965202,e="â™¥";break}this.graphics.beginFill(t),this.graphics.drawRoundedRect(0,0,this.width,this.height,5),this.graphics.endFill(),this.graphics.lineStyle(2,16777215,.8),this.graphics.drawRoundedRect(0,0,this.width,this.height,5);const i=new U({fontFamily:"Arial",fontSize:16,fontWeight:"bold",fill:16777215,stroke:0,strokeThickness:2});this.text=new O(e,i),this.text.anchor.set(.5),this.text.x=this.width/2,this.text.y=this.height/2,this.container.addChild(this.graphics),this.container.addChild(this.text)}setPosition(t,e){this.x=t,this.y=e,this.container.x=t,this.container.y=e}update(){this.y+=this.velocityY,this.container.y=this.y}getBounds(){return{left:this.x,right:this.x+this.width,top:this.y,bottom:this.y+this.height}}isOutOfBounds(t){return this.y>t}}class V{constructor(t,e,i){s(this,"container");s(this,"graphics");s(this,"velocityX");s(this,"velocityY");s(this,"life");s(this,"maxLife");s(this,"gravity",.3);s(this,"friction",.98);this.container=new b,this.container.position.set(t,e),this.graphics=new w,this.graphics.beginFill(i),this.graphics.drawCircle(0,0,Math.random()*3+1),this.graphics.endFill(),this.container.addChild(this.graphics),this.velocityX=(Math.random()-.5)*8,this.velocityY=(Math.random()-.5)*8-2,this.maxLife=Math.random()*60+30,this.life=this.maxLife}update(){this.velocityY+=this.gravity,this.velocityX*=this.friction,this.velocityY*=this.friction,this.container.x+=this.velocityX,this.container.y+=this.velocityY,this.life--;const t=this.life/this.maxLife;this.graphics.alpha=t;const e=.5+t*.5;return this.graphics.scale.set(e),this.life>0}destroy(){this.container.parent&&this.container.parent.removeChild(this.container)}}class ${constructor(t){s(this,"particles",[]);s(this,"container");this.container=t}createExplosion(t,e,i,a=8){for(let n=0;n<a;n++){const d=new V(t,e,i);this.particles.push(d),this.container.addChild(d.container)}}update(){for(let t=this.particles.length-1;t>=0;t--){const e=this.particles[t];e.update()||(e.destroy(),this.particles.splice(t,1))}}clear(){this.particles.forEach(t=>t.destroy()),this.particles=[]}}const q=()=>{const h=window.innerWidth,t=window.innerHeight,e=h-40,i=t-150,a=900,n=600,d=e/a,p=i/n,c=Math.min(d,p,1),o=a*c,m=n*c;return{gameWidth:Math.floor(o),gameHeight:Math.floor(m),scale:c}};let l,r,f,y,u,R,E,x,X,M,k,S,D;const j=()=>{const h=q();l=h.gameWidth,r=h.gameHeight,f=h.scale,y=Math.floor(100*f),u=Math.floor(20*f),R=Math.floor(8*f),x=Math.floor(30*f),X=5,M=10,k=Math.floor(1*f),S=Math.floor(8*f),D=.1,E=(l-(M+1)*k)/M};class J{constructor(t){s(this,"app");s(this,"gameContainer");s(this,"paddle");s(this,"ball");s(this,"bricks",[]);s(this,"powerUps",[]);s(this,"particleSystem");s(this,"score",0);s(this,"lives",3);s(this,"level",1);s(this,"isGameOver",!1);s(this,"isPaused",!1);s(this,"isGameStarted",!1);s(this,"removeInputHandler");s(this,"currentPaddleWidth",y);s(this,"safetyNetActive",!1);s(this,"safetyNet");this.app=t,this.gameContainer=new b,this.app.stage.addChild(this.gameContainer),this.particleSystem=new $(this.gameContainer)}async init(){this.createBackground(),this.paddle=new F(y,u),this.gameContainer.addChild(this.paddle.container),this.ball=new T(R),this.gameContainer.addChild(this.ball.container),this.createBricks(),this.setupInput(),this.updateUI(),this.paddle.setPosition(l/2-this.currentPaddleWidth/2,r-u-10),this.resetBall()}createBackground(){const t=new w;t.beginFill(3426654),t.drawRect(0,0,l,r),t.endFill(),this.gameContainer.addChild(t),this.safetyNet=new w,this.safetyNet.beginFill(3066993,.7),this.safetyNet.drawRect(0,r-5,l,5),this.safetyNet.endFill(),this.safetyNet.visible=!1,this.gameContainer.addChild(this.safetyNet)}createBricks(){const t=[5,4,3,2,1],e=50;for(let i=0;i<X;i++)for(let a=0;a<M;a++){const n=a*(E+k)+k,d=e+i*(x+k),p=new z(E,x,t[i]);p.setPosition(n,d),this.bricks.push(p),this.gameContainer.addChild(p.container)}}setupInput(){const t=o=>{if(!this.isGameOver)switch(o.key){case" ":o.preventDefault(),this.isGameStarted?this.togglePause():this.startGame();break;case"Escape":o.preventDefault(),this.togglePause();break;case"ArrowLeft":case"a":case"A":if(o.preventDefault(),!this.isPaused){const m=Math.max(0,this.paddle.x-20),P=r-u-10;this.paddle.setPosition(m,P)}break;case"ArrowRight":case"d":case"D":if(o.preventDefault(),!this.isPaused){const m=Math.min(l-this.currentPaddleWidth,this.paddle.x+20),P=r-u-10;this.paddle.setPosition(m,P)}break}},e=o=>{if(this.isGameOver||this.isPaused)return;const m=o,C=this.app.view.getBoundingClientRect(),G=m.clientX-C.left,A=l/C.width,I=G*A-this.currentPaddleWidth/2,W=Math.max(0,Math.min(l-this.currentPaddleWidth,I)),L=r-u-10;this.paddle.setPosition(W,L)},i=o=>{this.isGameOver||this.isPaused||this.isGameStarted||this.startGame()};let a=!1;const n=o=>{this.isGameOver||this.isPaused||(a=!0,o.preventDefault(),this.isGameStarted||this.startGame())},d=o=>{if(!a||this.isGameOver||this.isPaused)return;o.preventDefault();const m=o.touches[0],C=this.app.view.getBoundingClientRect(),G=m.clientX-C.left,A=l/C.width,I=G*A-this.currentPaddleWidth/2,W=Math.max(0,Math.min(l-this.currentPaddleWidth,I)),L=r-u-10;this.paddle.setPosition(W,L)},p=o=>{a=!1};document.addEventListener("keydown",t);const c=this.app.view;c.addEventListener("mousemove",e),c.addEventListener("click",i),c.addEventListener("touchstart",n,{passive:!1}),c.addEventListener("touchmove",d,{passive:!1}),c.addEventListener("touchend",p,{passive:!1}),this.removeInputHandler=()=>{document.removeEventListener("keydown",t),c.removeEventListener("mousemove",e),c.removeEventListener("click",i),c.removeEventListener("touchstart",n),c.removeEventListener("touchmove",d),c.removeEventListener("touchend",p)}}startGame(){this.isGameStarted=!0,this.ball.setVelocity(0,-S)}resetBall(){this.ball.setPosition(l/2,r-u-30),this.ball.setVelocity(0,0),this.isGameStarted=!1}update(t){this.isGameOver||this.isPaused||(this.isGameStarted?(this.ball.update(),this.checkCollisions()):this.ball.setPosition(this.paddle.x+this.currentPaddleWidth/2,r-u-30),this.updatePowerUps(),this.particleSystem.update())}checkCollisions(){const t=this.ball.getBounds();if(t.left<=0?(this.ball.setPosition(this.ball.radius,this.ball.y),this.ball.reverseX()):t.right>=l&&(this.ball.setPosition(l-this.ball.radius,this.ball.y),this.ball.reverseX()),t.top<=0&&(this.ball.setPosition(this.ball.x,this.ball.radius),this.ball.reverseY()),t.top>=r){this.safetyNetActive?(this.ball.setPosition(this.ball.x,r-this.ball.radius-5),this.ball.reverseY(),this.safetyNetActive=!1,this.safetyNet.visible=!1):this.loseLife();return}if(this.ball.checkCollisionWithPaddle(this.paddle)&&this.ball.y>this.paddle.y){this.ball.setPosition(this.ball.x,this.paddle.y-this.ball.radius),this.ball.reverseY();const e=(this.ball.x-this.paddle.x)/this.currentPaddleWidth,i=.5,n=1+Math.abs(e-i),d=S*n,p=(e-i)*.8;this.ball.setVelocityAndAngle(d,p)}for(let e=this.bricks.length-1;e>=0;e--){const i=this.bricks[e];if(this.ball.checkCollisionWithBrick(i)){const a=this.ball.getBounds(),n=i.getBounds(),d=Math.min(a.right-n.left,n.right-a.left),p=Math.min(a.bottom-n.top,n.bottom-a.top);if(d<p?this.ball.reverseX():this.ball.reverseY(),i.hit()){const o=i.getColor();this.particleSystem.createExplosion(i.x+E/2,i.y+x/2,o,12),this.bricks.splice(e,1),this.gameContainer.removeChild(i.container),Math.random()<D&&this.spawnPowerUp(i.x+E/2,i.y+x)}this.score+=10,this.updateUI(),this.bricks.length===0&&this.nextLevel();break}}}loseLife(){this.lives--,this.updateUI(),this.currentPaddleWidth=y,this.paddle.resize(this.currentPaddleWidth),this.lives<=0?this.gameOver():this.resetBall()}nextLevel(){this.level++,this.updateUI(),this.createBricks(),this.resetBall()}gameOver(){this.isGameOver=!0,this.showGameOver()}showGameOver(){const t=document.getElementById("gameOver"),e=document.getElementById("finalScore");t&&e&&(e.textContent=this.score.toString(),t.style.display="block")}togglePause(){this.isPaused=!this.isPaused,this.isPaused?this.showPauseMenu():this.hidePauseMenu()}showPauseMenu(){const t=document.getElementById("pauseMenu");t&&(t.style.display="block")}hidePauseMenu(){const t=document.getElementById("pauseMenu");t&&(t.style.display="none")}updateUI(){const t=document.getElementById("score"),e=document.getElementById("lives"),i=document.getElementById("level");t&&(t.textContent=this.score.toString()),e&&(e.textContent=this.lives.toString()),i&&(i.textContent=this.level.toString())}restart(){this.score=0,this.lives=3,this.level=1,this.isGameOver=!1,this.isPaused=!1,this.isGameStarted=!1,this.currentPaddleWidth=y,this.safetyNetActive=!1,this.safetyNet.visible=!1,this.particleSystem.clear(),this.bricks.forEach(e=>{this.gameContainer.removeChild(e.container)}),this.bricks=[],this.powerUps.forEach(e=>{this.gameContainer.removeChild(e.container)}),this.powerUps=[],this.createBricks(),this.resetBall(),this.paddle.setPosition(l/2-this.currentPaddleWidth/2,r-u-10),this.paddle.resize(this.currentPaddleWidth),this.updateUI();const t=document.getElementById("gameOver");t&&(t.style.display="none"),this.hidePauseMenu()}resume(){this.isPaused=!1,this.hidePauseMenu()}destroy(){this.removeInputHandler&&this.removeInputHandler(),this.particleSystem.clear(),this.gameContainer&&this.gameContainer.parent&&this.gameContainer.parent.removeChild(this.gameContainer)}spawnPowerUp(t,e){const i=[v.PADDLE_INCREASE,v.PADDLE_DECREASE,v.EXTRA_LIFE],a=i[Math.floor(Math.random()*i.length)],n=new K(a,t,e);this.powerUps.push(n),this.gameContainer.addChild(n.container)}updatePowerUps(){for(let t=this.powerUps.length-1;t>=0;t--){const e=this.powerUps[t];if(e.update(),e.isOutOfBounds(r)){this.powerUps.splice(t,1),this.gameContainer.removeChild(e.container);continue}this.checkPowerUpCollision(e)&&(this.applyPowerUp(e.type),this.powerUps.splice(t,1),this.gameContainer.removeChild(e.container))}}checkPowerUpCollision(t){const e=t.getBounds(),i=this.paddle.getBounds();return e.left<i.right&&e.right>i.left&&e.top<i.bottom&&e.bottom>i.top}applyPowerUp(t){switch(t){case v.PADDLE_INCREASE:this.currentPaddleWidth=Math.min(this.currentPaddleWidth*1.3,y*2),this.paddle.resize(this.currentPaddleWidth);break;case v.PADDLE_DECREASE:this.currentPaddleWidth=Math.max(this.currentPaddleWidth*.8,y*.5),this.paddle.resize(this.currentPaddleWidth);break;case v.EXTRA_LIFE:this.safetyNetActive||(this.safetyNetActive=!0,this.safetyNet.visible=!0);break}}}let g=null,B=null;async function Q(){j(),B=new N({width:l,height:r,backgroundColor:2899536,antialias:!0,resolution:window.devicePixelRatio||1});const h=document.getElementById("gameContainer");if(h){const t=B.view;t.style.width=`${l}px`,t.style.height=`${r}px`,t.style.maxWidth="100%",t.style.maxHeight="100%",h.appendChild(t),console.log("Breakout dimensions:",{gameWidth:l,gameHeight:r,scale:f,canvasWidth:t.width,canvasHeight:t.height,styleWidth:t.style.width,styleHeight:t.style.height,containerWidth:h.offsetWidth,containerHeight:h.offsetHeight})}g=new J(B),await g.init(),B.ticker.add(Z)}function Z(h){g&&g.update(h)}window.restartGame=()=>{g&&g.restart()};window.returnToMainMenu=()=>{window.location.href="/arcade/"};window.resumeGame=()=>{g&&g.resume()};window.togglePause=()=>{g&&g.togglePause()};window.addEventListener("load",Q);
//# sourceMappingURL=breakout-BzUFG1Ae.js.map
