var I=Object.defineProperty;var A=(h,t,e)=>t in h?I(h,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):h[t]=e;var i=(h,t,e)=>A(h,typeof t!="symbol"?t+"":t,e);import"./modulepreload-polyfill-B5Qt9EMX.js";import{C as y,G as g,T as G,a as M,A as S}from"./HTMLText-Dcivl2sH.js";class R{constructor(t,e){i(this,"container");i(this,"x",0);i(this,"y",0);i(this,"width");i(this,"height");i(this,"graphics");this.width=t,this.height=e,this.container=new y,this.updateGraphics()}updateGraphics(){this.graphics&&this.container.removeChild(this.graphics),this.graphics=new g,this.graphics.beginFill(5164484),this.graphics.drawRoundedRect(0,0,this.width,this.height,5),this.graphics.endFill(),this.graphics.lineStyle(2,16777215,.8),this.graphics.drawRoundedRect(0,0,this.width,this.height,5),this.container.addChild(this.graphics)}setPosition(t,e){this.x=t,this.y=e,this.container.x=t,this.container.y=e}resize(t){this.width=t,this.updateGraphics()}getBounds(){return{left:this.x,right:this.x+this.width,top:this.y,bottom:this.y+this.height}}}class L{constructor(t){i(this,"container");i(this,"x",0);i(this,"y",0);i(this,"radius");i(this,"velocityX",0);i(this,"velocityY",0);i(this,"graphics");this.radius=t,this.container=new y,this.graphics=new g,this.graphics.beginFill(16777215),this.graphics.drawCircle(0,0,t),this.graphics.endFill(),this.graphics.lineStyle(2,2899536,.8),this.graphics.drawCircle(0,0,t),this.container.addChild(this.graphics)}setPosition(t,e){this.x=t,this.y=e,this.container.x=t,this.container.y=e}setVelocity(t,e){this.velocityX=t,this.velocityY=e}setVelocityAndAngle(t,e){this.velocityX=t*Math.sin(e),this.velocityY=-t*Math.cos(e)}setAngle(t){const e=Math.sqrt(this.velocityX*this.velocityX+this.velocityY*this.velocityY);this.velocityX=e*Math.sin(t),this.velocityY=-e*Math.cos(t)}reverseX(){this.velocityX=-this.velocityX}reverseY(){this.velocityY=-this.velocityY}update(){this.x+=this.velocityX,this.y+=this.velocityY,this.container.x=this.x,this.container.y=this.y}getBounds(){return{left:this.x-this.radius,right:this.x+this.radius,top:this.y-this.radius,bottom:this.y+this.radius}}checkCollisionWithPaddle(t){const e=this.getBounds(),s=t.getBounds();return e.left<s.right&&e.right>s.left&&e.top<s.bottom&&e.bottom>s.top}checkCollisionWithBrick(t){const e=this.getBounds(),s=t.getBounds();return e.left<s.right&&e.right>s.left&&e.top<s.bottom&&e.bottom>s.top}}class D{constructor(t,e,s){i(this,"container");i(this,"x",0);i(this,"y",0);i(this,"width");i(this,"height");i(this,"maxHealth");i(this,"health");i(this,"graphics");this.width=t,this.height=e,this.maxHealth=s,this.health=s,this.container=new y,this.updateGraphics()}updateGraphics(){this.graphics&&this.container.removeChild(this.graphics),this.graphics=new g;const t=[3066993,15844367,15105570,15158332,12597547],e=Math.max(0,this.health-1),s=t[e];this.graphics.beginFill(s),this.graphics.drawRoundedRect(0,0,this.width,this.height,3),this.graphics.endFill(),this.graphics.lineStyle(1,16777215,.3),this.graphics.drawRoundedRect(0,0,this.width,this.height,3),this.graphics.lineStyle(1,16777215,.6),this.graphics.drawRoundedRect(2,2,this.width-4,this.height-4,2),this.container.addChild(this.graphics)}setPosition(t,e){this.x=t,this.y=e,this.container.x=t,this.container.y=e}hit(){return this.health--,this.updateGraphics(),this.health<=0}getBounds(){return{left:this.x,right:this.x+this.width,top:this.y,bottom:this.y+this.height}}getColor(){const t=[3066993,15844367,15105570,15158332,12597547],e=Math.max(0,this.health-1);return t[e]}}var u=(h=>(h.PADDLE_INCREASE="paddle_increase",h.PADDLE_DECREASE="paddle_decrease",h.EXTRA_LIFE="extra_life",h))(u||{});class _{constructor(t,e,s){i(this,"container");i(this,"x",0);i(this,"y",0);i(this,"type");i(this,"width",30);i(this,"height",30);i(this,"velocityY",2);i(this,"graphics");i(this,"text");this.type=t,this.x=e,this.y=s,this.container=new y,this.createGraphics(),this.setPosition(e,s)}createGraphics(){this.graphics=new g;let t,e;switch(this.type){case"paddle_increase":t=3066993,e="+";break;case"paddle_decrease":t=15158332,e="-";break;case"extra_life":t=15965202,e="â™¥";break}this.graphics.beginFill(t),this.graphics.drawRoundedRect(0,0,this.width,this.height,5),this.graphics.endFill(),this.graphics.lineStyle(2,16777215,.8),this.graphics.drawRoundedRect(0,0,this.width,this.height,5);const s=new G({fontFamily:"Arial",fontSize:16,fontWeight:"bold",fill:16777215,stroke:0,strokeThickness:2});this.text=new M(e,s),this.text.anchor.set(.5),this.text.x=this.width/2,this.text.y=this.height/2,this.container.addChild(this.graphics),this.container.addChild(this.text)}setPosition(t,e){this.x=t,this.y=e,this.container.x=t,this.container.y=e}update(){this.y+=this.velocityY,this.container.y=this.y}getBounds(){return{left:this.x,right:this.x+this.width,top:this.y,bottom:this.y+this.height}}isOutOfBounds(t){return this.y>t}}class U{constructor(t,e,s){i(this,"container");i(this,"graphics");i(this,"velocityX");i(this,"velocityY");i(this,"life");i(this,"maxLife");i(this,"gravity",.3);i(this,"friction",.98);this.container=new y,this.container.position.set(t,e),this.graphics=new g,this.graphics.beginFill(s),this.graphics.drawCircle(0,0,Math.random()*3+1),this.graphics.endFill(),this.container.addChild(this.graphics),this.velocityX=(Math.random()-.5)*8,this.velocityY=(Math.random()-.5)*8-2,this.maxLife=Math.random()*60+30,this.life=this.maxLife}update(){this.velocityY+=this.gravity,this.velocityX*=this.friction,this.velocityY*=this.friction,this.container.x+=this.velocityX,this.container.y+=this.velocityY,this.life--;const t=this.life/this.maxLife;this.graphics.alpha=t;const e=.5+t*.5;return this.graphics.scale.set(e),this.life>0}destroy(){this.container.parent&&this.container.parent.removeChild(this.container)}}class X{constructor(t){i(this,"particles",[]);i(this,"container");this.container=t}createExplosion(t,e,s,n=8){for(let a=0;a<n;a++){const o=new U(t,e,s);this.particles.push(o),this.container.addChild(o.container)}}update(){for(let t=this.particles.length-1;t>=0;t--){const e=this.particles[t];e.update()||(e.destroy(),this.particles.splice(t,1))}}clear(){this.particles.forEach(t=>t.destroy()),this.particles=[]}}const l=800,r=600,d=100,m=20,W=8,f=30,O=5,C=10,b=1,x=8,Y=.1,v=(l-(C+1)*b)/C;class N{constructor(t){i(this,"app");i(this,"gameContainer");i(this,"paddle");i(this,"ball");i(this,"bricks",[]);i(this,"powerUps",[]);i(this,"particleSystem");i(this,"score",0);i(this,"lives",3);i(this,"level",1);i(this,"isGameOver",!1);i(this,"isPaused",!1);i(this,"isGameStarted",!1);i(this,"removeInputHandler");i(this,"currentPaddleWidth",d);i(this,"safetyNetActive",!1);i(this,"safetyNet");this.app=t,this.gameContainer=new y,this.app.stage.addChild(this.gameContainer),this.particleSystem=new X(this.gameContainer)}async init(){this.createBackground(),this.paddle=new R(d,m),this.gameContainer.addChild(this.paddle.container),this.ball=new L(W),this.gameContainer.addChild(this.ball.container),this.createBricks(),this.setupInput(),this.updateUI(),this.paddle.setPosition(l/2-this.currentPaddleWidth/2,r-m-10),this.resetBall()}createBackground(){const t=new g;t.beginFill(3426654),t.drawRect(0,0,l,r),t.endFill(),this.gameContainer.addChild(t),this.safetyNet=new g,this.safetyNet.beginFill(3066993,.7),this.safetyNet.drawRect(0,r-5,l,5),this.safetyNet.endFill(),this.safetyNet.visible=!1,this.gameContainer.addChild(this.safetyNet)}createBricks(){const t=[5,4,3,2,1],e=50;for(let s=0;s<O;s++)for(let n=0;n<C;n++){const a=n*(v+b)+b,o=e+s*(f+b),c=new D(v,f,t[s]);c.setPosition(a,o),this.bricks.push(c),this.gameContainer.addChild(c.container)}}setupInput(){const t=a=>{if(!this.isGameOver)switch(a.key){case" ":a.preventDefault(),this.isGameStarted?this.togglePause():this.startGame();break;case"Escape":a.preventDefault(),this.togglePause();break}},e=a=>{if(this.isGameOver||this.isPaused)return;const o=a,P=this.app.view.getBoundingClientRect(),B=o.clientX-P.left-d/2,k=Math.max(0,Math.min(l-d,B));this.paddle.setPosition(k,r-m-10)},s=a=>{this.isGameOver||this.isPaused||this.isGameStarted||this.startGame()};document.addEventListener("keydown",t);const n=this.app.view;n.addEventListener("mousemove",e),n.addEventListener("click",s),this.removeInputHandler=()=>{document.removeEventListener("keydown",t),n.removeEventListener("mousemove",e),n.removeEventListener("click",s)}}startGame(){this.isGameStarted=!0,this.ball.setVelocity(0,-x)}resetBall(){this.ball.setPosition(l/2,r-m-30),this.ball.setVelocity(0,0),this.isGameStarted=!1}update(t){this.isGameOver||this.isPaused||(this.isGameStarted?(this.ball.update(),this.checkCollisions()):this.ball.setPosition(this.paddle.x+this.currentPaddleWidth/2,r-m-30),this.updatePowerUps(),this.particleSystem.update())}checkCollisions(){const t=this.ball.getBounds();if(t.left<=0?(this.ball.setPosition(this.ball.radius,this.ball.y),this.ball.reverseX()):t.right>=l&&(this.ball.setPosition(l-this.ball.radius,this.ball.y),this.ball.reverseX()),t.top<=0&&(this.ball.setPosition(this.ball.x,this.ball.radius),this.ball.reverseY()),t.top>=r){this.safetyNetActive?(this.ball.setPosition(this.ball.x,r-this.ball.radius-5),this.ball.reverseY(),this.safetyNetActive=!1,this.safetyNet.visible=!1):this.loseLife();return}if(this.ball.checkCollisionWithPaddle(this.paddle)&&this.ball.y>this.paddle.y){this.ball.setPosition(this.ball.x,this.paddle.y-this.ball.radius),this.ball.reverseY();const e=(this.ball.x-this.paddle.x)/this.currentPaddleWidth,s=.5,a=1+Math.abs(e-s),o=x*a,c=(e-s)*.8;this.ball.setVelocityAndAngle(o,c)}for(let e=this.bricks.length-1;e>=0;e--){const s=this.bricks[e];if(this.ball.checkCollisionWithBrick(s)){const n=this.ball.getBounds(),a=s.getBounds(),o=Math.min(n.right-a.left,a.right-n.left),c=Math.min(n.bottom-a.top,a.bottom-n.top);if(o<c?this.ball.reverseX():this.ball.reverseY(),s.hit()){const E=s.getColor();this.particleSystem.createExplosion(s.x+v/2,s.y+f/2,E,12),this.bricks.splice(e,1),this.gameContainer.removeChild(s.container),Math.random()<Y&&this.spawnPowerUp(s.x+v/2,s.y+f)}this.score+=10,this.updateUI(),this.bricks.length===0&&this.nextLevel();break}}}loseLife(){this.lives--,this.updateUI(),this.currentPaddleWidth=d,this.paddle.resize(this.currentPaddleWidth),this.lives<=0?this.gameOver():this.resetBall()}nextLevel(){this.level++,this.updateUI(),this.createBricks(),this.resetBall()}gameOver(){this.isGameOver=!0,this.showGameOver()}showGameOver(){const t=document.getElementById("gameOver"),e=document.getElementById("finalScore");t&&e&&(e.textContent=this.score.toString(),t.style.display="block")}togglePause(){this.isPaused=!this.isPaused,this.isPaused?this.showPauseMenu():this.hidePauseMenu()}showPauseMenu(){const t=document.getElementById("pauseMenu");t&&(t.style.display="block")}hidePauseMenu(){const t=document.getElementById("pauseMenu");t&&(t.style.display="none")}updateUI(){const t=document.getElementById("score"),e=document.getElementById("lives"),s=document.getElementById("level");t&&(t.textContent=this.score.toString()),e&&(e.textContent=this.lives.toString()),s&&(s.textContent=this.level.toString())}restart(){this.score=0,this.lives=3,this.level=1,this.isGameOver=!1,this.isPaused=!1,this.isGameStarted=!1,this.currentPaddleWidth=d,this.safetyNetActive=!1,this.safetyNet.visible=!1,this.particleSystem.clear(),this.bricks.forEach(e=>{this.gameContainer.removeChild(e.container)}),this.bricks=[],this.powerUps.forEach(e=>{this.gameContainer.removeChild(e.container)}),this.powerUps=[],this.createBricks(),this.resetBall(),this.paddle.setPosition(l/2-this.currentPaddleWidth/2,r-m-10),this.paddle.resize(this.currentPaddleWidth),this.updateUI();const t=document.getElementById("gameOver");t&&(t.style.display="none"),this.hidePauseMenu()}resume(){this.isPaused=!1,this.hidePauseMenu()}destroy(){this.removeInputHandler&&this.removeInputHandler(),this.particleSystem.clear(),this.gameContainer&&this.gameContainer.parent&&this.gameContainer.parent.removeChild(this.gameContainer)}spawnPowerUp(t,e){const s=[u.PADDLE_INCREASE,u.PADDLE_DECREASE,u.EXTRA_LIFE],n=s[Math.floor(Math.random()*s.length)],a=new _(n,t,e);this.powerUps.push(a),this.gameContainer.addChild(a.container)}updatePowerUps(){for(let t=this.powerUps.length-1;t>=0;t--){const e=this.powerUps[t];if(e.update(),e.isOutOfBounds(r)){this.powerUps.splice(t,1),this.gameContainer.removeChild(e.container);continue}this.checkPowerUpCollision(e)&&(this.applyPowerUp(e.type),this.powerUps.splice(t,1),this.gameContainer.removeChild(e.container))}}checkPowerUpCollision(t){const e=t.getBounds(),s=this.paddle.getBounds();return e.left<s.right&&e.right>s.left&&e.top<s.bottom&&e.bottom>s.top}applyPowerUp(t){switch(t){case u.PADDLE_INCREASE:this.currentPaddleWidth=Math.min(this.currentPaddleWidth*1.3,d*2),this.paddle.resize(this.currentPaddleWidth);break;case u.PADDLE_DECREASE:this.currentPaddleWidth=Math.max(this.currentPaddleWidth*.8,d*.5),this.paddle.resize(this.currentPaddleWidth);break;case u.EXTRA_LIFE:this.safetyNetActive||(this.safetyNetActive=!0,this.safetyNet.visible=!0);break}}}let p=null,w=null;async function F(){w=new S({width:l,height:r,backgroundColor:2899536,antialias:!0,resolution:window.devicePixelRatio||1});const h=document.getElementById("gameContainer");h&&h.appendChild(w.view),p=new N(w),await p.init(),w.ticker.add(T)}function T(h){p&&p.update(h)}window.restartGame=()=>{p&&p.restart()};window.returnToMainMenu=()=>{window.location.href="/"};window.resumeGame=()=>{p&&p.resume()};window.addEventListener("load",F);
//# sourceMappingURL=breakout-BU4nGQs8.js.map
