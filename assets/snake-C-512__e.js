var y=Object.defineProperty;var I=(n,e,t)=>e in n?y(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var i=(n,e,t)=>I(n,typeof e!="symbol"?e+"":e,t);import"./modulepreload-polyfill-B5Qt9EMX.js";import{C as p,G as w,A as E}from"./HTMLText-Dcivl2sH.js";class v{constructor(e,t,s){i(this,"container");i(this,"segments",[]);i(this,"direction","right");i(this,"nextDirection","right");i(this,"gridSize");i(this,"gridWidth");i(this,"gridHeight");i(this,"graphics");this.gridSize=e,this.gridWidth=t,this.gridHeight=s,this.container=new p,this.graphics=new w,this.container.addChild(this.graphics),this.reset()}reset(){const e=Math.floor(this.gridWidth/2),t=Math.floor(this.gridHeight/2);this.segments=[{x:e,y:t},{x:e-1,y:t},{x:e-2,y:t}],this.direction="right",this.nextDirection="right",this.draw()}setDirection(e){this.direction==="up"&&e==="down"||this.direction==="down"&&e==="up"||this.direction==="left"&&e==="right"||this.direction==="right"&&e==="left"||(this.nextDirection=e)}move(){this.direction=this.nextDirection;const e=this.segments[0],t={x:e.x,y:e.y};switch(this.direction){case"up":t.y-=1;break;case"down":t.y+=1;break;case"left":t.x-=1;break;case"right":t.x+=1;break}return this.segments.unshift(t),this.segments.pop(),this.draw(),t}grow(){const e=this.segments[this.segments.length-1];this.segments.push({x:e.x,y:e.y})}checkCollision(e,t){return this.segments.some(s=>s.x===e&&s.y===t)}checkCollisionWithBody(e,t){return this.segments.slice(1).some(s=>s.x===e&&s.y===t)}draw(){this.graphics.clear(),this.segments.forEach((e,t)=>{const s=e.x*this.gridSize,o=e.y*this.gridSize;t===0?this.graphics.beginFill(3066993):this.graphics.beginFill(2600544),this.graphics.drawRoundedRect(s+1,o+1,this.gridSize-2,this.gridSize-2,3),this.graphics.endFill(),this.graphics.lineStyle(2,2267476,.8),this.graphics.drawRoundedRect(s+1,o+1,this.gridSize-2,this.gridSize-2,3),t===0&&this.drawEyes(s,o)})}drawEyes(e,t){let a,r,c,h;switch(this.direction){case"up":a=e+5,r=t+5,c=e+this.gridSize-5-3,h=t+5;break;case"down":a=e+5,r=t+this.gridSize-5-3,c=e+this.gridSize-5-3,h=t+this.gridSize-5-3;break;case"left":a=e+5,r=t+5,c=e+5,h=t+this.gridSize-5-3;break;case"right":a=e+this.gridSize-5-3,r=t+5,c=e+this.gridSize-5-3,h=t+this.gridSize-5-3;break}this.graphics.beginFill(0),this.graphics.drawCircle(a,r,3),this.graphics.drawCircle(c,h,3),this.graphics.endFill()}getHead(){return this.segments[0]}getLength(){return this.segments.length}}class G{constructor(e){i(this,"container");i(this,"x",0);i(this,"y",0);i(this,"graphics");i(this,"gridSize");i(this,"animationTime",0);this.gridSize=e,this.container=new p,this.graphics=new w,this.container.addChild(this.graphics)}setPosition(e,t){this.x=e,this.y=t,this.draw()}draw(){this.graphics.clear();const e=this.x*this.gridSize+this.gridSize/2,t=this.y*this.gridSize+this.gridSize/2,s=this.gridSize/2-2;this.graphics.beginFill(15158332),this.graphics.drawCircle(e,t,s),this.graphics.endFill(),this.graphics.lineStyle(2,12597547,.8),this.graphics.drawCircle(e,t,s),this.graphics.beginFill(16777215),this.graphics.drawCircle(e-s/3,t-s/3,s/4),this.graphics.endFill(),this.graphics.beginFill(2899536),this.graphics.drawEllipse(e+s/2,t-s/2,s/6,s/3),this.graphics.endFill()}update(e){this.animationTime+=e;const t=1+Math.sin(this.animationTime*.1)*.05;this.container.scale.set(t)}}const S=()=>{const n=window.innerWidth,e=window.innerHeight,t=n-40,s=e-200,o=n<768,a=o?10:20,r=o?15:20,c=t/a,h=s/r,g=Math.floor(Math.min(c,h)),l=a*g,m=r*g;return{gridSize:g,gridWidth:a,gridHeight:r,gameWidth:l,gameHeight:m}};class H{constructor(e){i(this,"app");i(this,"gameContainer");i(this,"snake");i(this,"food");i(this,"score",0);i(this,"highScore",0);i(this,"gameSpeed",150);i(this,"lastMoveTime",0);i(this,"isGameOver",!1);i(this,"isPaused",!1);i(this,"removeInputHandler");i(this,"removeTouchHandler");i(this,"GRID_SIZE");i(this,"GRID_WIDTH");i(this,"GRID_HEIGHT");i(this,"GAME_WIDTH");i(this,"GAME_HEIGHT");this.app=e,this.gameContainer=new p,this.app.stage.addChild(this.gameContainer);const t=S();this.GRID_SIZE=t.gridSize,this.GRID_WIDTH=t.gridWidth,this.GRID_HEIGHT=t.gridHeight,this.GAME_WIDTH=t.gameWidth,this.GAME_HEIGHT=t.gameHeight,this.highScore=parseInt(localStorage.getItem("snakeHighScore")||"0")}async init(){this.createBackground(),this.snake=new v(this.GRID_SIZE,this.GRID_WIDTH,this.GRID_HEIGHT),this.gameContainer.addChild(this.snake.container),this.food=new G(this.GRID_SIZE),this.gameContainer.addChild(this.food.container),this.spawnFood(),this.setupInput(),this.setupTouchControls(),this.updateUI()}createBackground(){const e=new w;e.beginFill(3426654),e.drawRect(0,0,this.GAME_WIDTH,this.GAME_HEIGHT),e.endFill(),e.lineStyle(1,2899536,1);for(let t=0;t<=this.GRID_WIDTH;t++)e.moveTo(t*this.GRID_SIZE,0),e.lineTo(t*this.GRID_SIZE,this.GAME_HEIGHT);for(let t=0;t<=this.GRID_HEIGHT;t++)e.moveTo(0,t*this.GRID_SIZE),e.lineTo(this.GAME_WIDTH,t*this.GRID_SIZE);this.gameContainer.addChild(e)}setupInput(){const e=t=>{if(!this.isGameOver)switch(t.key){case"ArrowUp":case"w":case"W":t.preventDefault(),this.snake.setDirection("up");break;case"ArrowDown":case"s":case"S":t.preventDefault(),this.snake.setDirection("down");break;case"ArrowLeft":case"a":case"A":t.preventDefault(),this.snake.setDirection("left");break;case"ArrowRight":case"d":case"D":t.preventDefault(),this.snake.setDirection("right");break;case" ":case"Escape":t.preventDefault(),this.togglePause();break}};document.addEventListener("keydown",e),this.removeInputHandler=()=>{document.removeEventListener("keydown",e)}}setupTouchControls(){let e=0,t=0,s=!1;const o=30,a=g=>{if(this.isGameOver)return;const l=g.touches[0];e=l.clientX,t=l.clientY,s=!0},r=g=>{s&&g.preventDefault()},c=g=>{if(!s)return;const l=g.changedTouches[0],m=l.clientX-e,f=l.clientY-t;(Math.abs(m)>o||Math.abs(f)>o)&&(Math.abs(m)>Math.abs(f)?m>0?this.snake.setDirection("right"):this.snake.setDirection("left"):f>0?this.snake.setDirection("down"):this.snake.setDirection("up")),s=!1},h=this.app.view;h.addEventListener("touchstart",a,{passive:!1}),h.addEventListener("touchmove",r,{passive:!1}),h.addEventListener("touchend",c,{passive:!1}),this.removeTouchHandler=()=>{h.removeEventListener("touchstart",a),h.removeEventListener("touchmove",r),h.removeEventListener("touchend",c)}}update(e){if(this.isGameOver||this.isPaused)return;const t=Date.now();t-this.lastMoveTime>this.gameSpeed&&(this.moveSnake(),this.lastMoveTime=t)}moveSnake(){const e=this.snake.move();if(e.x<0||e.x>=this.GRID_WIDTH||e.y<0||e.y>=this.GRID_HEIGHT){this.gameOver();return}if(this.snake.checkCollisionWithBody(e.x,e.y)){this.gameOver();return}e.x===this.food.x&&e.y===this.food.y&&(this.snake.grow(),this.spawnFood(),this.score+=10,this.updateUI(),this.score%50===0&&this.gameSpeed>50&&(this.gameSpeed-=10))}spawnFood(){let e,t;do e=Math.floor(Math.random()*this.GRID_WIDTH),t=Math.floor(Math.random()*this.GRID_HEIGHT);while(this.snake.checkCollision(e,t));this.food.setPosition(e,t)}gameOver(){this.isGameOver=!0,this.score>this.highScore&&(this.highScore=this.score,localStorage.setItem("snakeHighScore",this.highScore.toString()),this.updateUI()),this.showGameOver()}showGameOver(){const e=document.getElementById("gameOver"),t=document.getElementById("finalScore");e&&t&&(t.textContent=this.score.toString(),e.style.display="block")}togglePause(){this.isPaused=!this.isPaused,this.isPaused?this.showPauseMenu():this.hidePauseMenu()}showPauseMenu(){const e=document.getElementById("pauseMenu");e&&(e.style.display="block")}hidePauseMenu(){const e=document.getElementById("pauseMenu");e&&(e.style.display="none")}updateUI(){const e=document.getElementById("score"),t=document.getElementById("highScore");e&&(e.textContent=this.score.toString()),t&&(t.textContent=this.highScore.toString())}restart(){this.score=0,this.gameSpeed=150,this.isGameOver=!1,this.isPaused=!1,this.lastMoveTime=Date.now(),this.snake.reset(),this.spawnFood(),this.updateUI();const e=document.getElementById("gameOver");e&&(e.style.display="none"),this.hidePauseMenu()}resume(){this.isPaused=!1,this.hidePauseMenu()}destroy(){this.removeInputHandler&&this.removeInputHandler(),this.removeTouchHandler&&this.removeTouchHandler(),this.gameContainer&&this.gameContainer.parent&&this.gameContainer.parent.removeChild(this.gameContainer)}}let d=null,u=null;async function k(){const n=S();u=new E({width:n.gameWidth,height:n.gameHeight,backgroundColor:2899536,antialias:!0,resolution:window.devicePixelRatio||1});const e=document.getElementById("gameContainer");e&&e.appendChild(u.view),d=new H(u),await d.init(),u.ticker.add(D)}function D(n){d&&d.update(n)}window.restartGame=()=>{d&&d.restart()};window.returnToMainMenu=()=>{window.location.href="/arcade/"};window.resumeGame=()=>{d&&d.resume()};window.togglePause=()=>{d&&d.togglePause()};window.addEventListener("load",k);
//# sourceMappingURL=snake-C-512__e.js.map
