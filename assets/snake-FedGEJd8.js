var I=Object.defineProperty;var v=(n,e,t)=>e in n?I(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var s=(n,e,t)=>v(n,typeof e!="symbol"?e+"":e,t);import"./modulepreload-polyfill-B5Qt9EMX.js";import{C as f,G as y,A as E}from"./HTMLText-Dcivl2sH.js";class H{constructor(e,t,i){s(this,"container");s(this,"segments",[]);s(this,"direction","right");s(this,"nextDirection","right");s(this,"gridSize");s(this,"gridWidth");s(this,"gridHeight");s(this,"graphics");this.gridSize=e,this.gridWidth=t,this.gridHeight=i,this.container=new f,this.graphics=new y,this.container.addChild(this.graphics),this.reset()}reset(){const e=Math.floor(this.gridWidth/2),t=Math.floor(this.gridHeight/2);this.segments=[{x:e,y:t},{x:e-1,y:t},{x:e-2,y:t}],this.direction="right",this.nextDirection="right",this.draw()}setDirection(e){this.direction==="up"&&e==="down"||this.direction==="down"&&e==="up"||this.direction==="left"&&e==="right"||this.direction==="right"&&e==="left"||(this.nextDirection=e)}move(){this.direction=this.nextDirection;const e=this.segments[0],t={x:e.x,y:e.y};switch(this.direction){case"up":t.y-=1;break;case"down":t.y+=1;break;case"left":t.x-=1;break;case"right":t.x+=1;break}return this.segments.unshift(t),this.segments.pop(),this.draw(),t}grow(){const e=this.segments[this.segments.length-1];this.segments.push({x:e.x,y:e.y})}checkCollision(e,t){return this.segments.some(i=>i.x===e&&i.y===t)}checkCollisionWithBody(e,t){return this.segments.slice(1).some(i=>i.x===e&&i.y===t)}draw(){this.graphics.clear(),this.segments.forEach((e,t)=>{const i=e.x*this.gridSize,d=e.y*this.gridSize;t===0?this.graphics.beginFill(3066993):this.graphics.beginFill(2600544),this.graphics.drawRoundedRect(i+1,d+1,this.gridSize-2,this.gridSize-2,3),this.graphics.endFill(),this.graphics.lineStyle(2,2267476,.8),this.graphics.drawRoundedRect(i+1,d+1,this.gridSize-2,this.gridSize-2,3),t===0&&this.drawEyes(i,d)})}drawEyes(e,t){let h,a,c,r;switch(this.direction){case"up":h=e+5,a=t+5,c=e+this.gridSize-5-3,r=t+5;break;case"down":h=e+5,a=t+this.gridSize-5-3,c=e+this.gridSize-5-3,r=t+this.gridSize-5-3;break;case"left":h=e+5,a=t+5,c=e+5,r=t+this.gridSize-5-3;break;case"right":h=e+this.gridSize-5-3,a=t+5,c=e+this.gridSize-5-3,r=t+this.gridSize-5-3;break}this.graphics.beginFill(0),this.graphics.drawCircle(h,a,3),this.graphics.drawCircle(c,r,3),this.graphics.endFill()}getHead(){return this.segments[0]}getLength(){return this.segments.length}}class G{constructor(e){s(this,"container");s(this,"x",0);s(this,"y",0);s(this,"graphics");s(this,"gridSize");s(this,"animationTime",0);this.gridSize=e,this.container=new f,this.graphics=new y,this.container.addChild(this.graphics)}setPosition(e,t){this.x=e,this.y=t,this.draw()}draw(){this.graphics.clear();const e=this.x*this.gridSize+this.gridSize/2,t=this.y*this.gridSize+this.gridSize/2,i=this.gridSize/2-2;this.graphics.beginFill(15158332),this.graphics.drawCircle(e,t,i),this.graphics.endFill(),this.graphics.lineStyle(2,12597547,.8),this.graphics.drawCircle(e,t,i),this.graphics.beginFill(16777215),this.graphics.drawCircle(e-i/3,t-i/3,i/4),this.graphics.endFill(),this.graphics.beginFill(2899536),this.graphics.drawEllipse(e+i/2,t-i/2,i/6,i/3),this.graphics.endFill()}update(e){this.animationTime+=e;const t=1+Math.sin(this.animationTime*.1)*.05;this.container.scale.set(t)}}const S=()=>{const n=window.innerWidth,e=window.innerHeight,t=n-40,i=e-250,d=n<768,h=d?10:15;let a=d?15:20;const c=t/h,r=i/a;let o=Math.floor(Math.min(c,r));if(a*o>i){a=Math.floor(i/o);const w=i/a;o=Math.floor(Math.min(c,w))}const m=h*o,u=a*o;return{gridSize:o,gridWidth:h,gridHeight:a,gameWidth:m,gameHeight:u}};class k{constructor(e){s(this,"app");s(this,"gameContainer");s(this,"snake");s(this,"food");s(this,"score",0);s(this,"highScore",0);s(this,"gameSpeed",150);s(this,"lastMoveTime",0);s(this,"isGameOver",!1);s(this,"isPaused",!1);s(this,"isWaitingToStart",!0);s(this,"removeInputHandler");s(this,"removeTouchHandler");s(this,"GRID_SIZE");s(this,"GRID_WIDTH");s(this,"GRID_HEIGHT");s(this,"GAME_WIDTH");s(this,"GAME_HEIGHT");this.app=e,this.gameContainer=new f,this.app.stage.addChild(this.gameContainer);const t=S();this.GRID_SIZE=t.gridSize,this.GRID_WIDTH=t.gridWidth,this.GRID_HEIGHT=t.gridHeight,this.GAME_WIDTH=t.gameWidth,this.GAME_HEIGHT=t.gameHeight,this.highScore=parseInt(localStorage.getItem("snakeHighScore")||"0")}async init(){this.createBackground(),this.snake=new H(this.GRID_SIZE,this.GRID_WIDTH,this.GRID_HEIGHT),this.gameContainer.addChild(this.snake.container),this.food=new G(this.GRID_SIZE),this.gameContainer.addChild(this.food.container),this.spawnFood(),this.setupInput(),this.setupTouchControls(),this.setupStartScreen(),this.updateUI()}createBackground(){const e=new y;e.beginFill(3426654),e.drawRect(0,0,this.GAME_WIDTH,this.GAME_HEIGHT),e.endFill(),e.lineStyle(1,2899536,1);for(let t=0;t<=this.GRID_WIDTH;t++)e.moveTo(t*this.GRID_SIZE,0),e.lineTo(t*this.GRID_SIZE,this.GAME_HEIGHT);for(let t=0;t<=this.GRID_HEIGHT;t++)e.moveTo(0,t*this.GRID_SIZE),e.lineTo(this.GAME_WIDTH,t*this.GRID_SIZE);this.gameContainer.addChild(e)}setupInput(){const e=t=>{if(!this.isGameOver)switch(t.key){case"ArrowUp":case"w":case"W":t.preventDefault(),this.snake.setDirection("up");break;case"ArrowDown":case"s":case"S":t.preventDefault(),this.snake.setDirection("down");break;case"ArrowLeft":case"a":case"A":t.preventDefault(),this.snake.setDirection("left");break;case"ArrowRight":case"d":case"D":t.preventDefault(),this.snake.setDirection("right");break;case" ":case"Escape":t.preventDefault(),this.togglePause();break}};document.addEventListener("keydown",e),this.removeInputHandler=()=>{document.removeEventListener("keydown",e)}}setupTouchControls(){let e=0,t=0,i=!1;const d=30,h=o=>{if(this.isGameOver)return;const g=o.touches[0];e=g.clientX,t=g.clientY,i=!0},a=o=>{i&&o.preventDefault()},c=o=>{if(!i)return;const g=o.changedTouches[0],m=g.clientX-e,u=g.clientY-t;(Math.abs(m)>d||Math.abs(u)>d)&&(Math.abs(m)>Math.abs(u)?m>0?this.snake.setDirection("right"):this.snake.setDirection("left"):u>0?this.snake.setDirection("down"):this.snake.setDirection("up")),i=!1},r=this.app.view;r.addEventListener("touchstart",h,{passive:!1}),r.addEventListener("touchmove",a,{passive:!1}),r.addEventListener("touchend",c,{passive:!1}),this.removeTouchHandler=()=>{r.removeEventListener("touchstart",h),r.removeEventListener("touchmove",a),r.removeEventListener("touchend",c)}}setupStartScreen(){const e=document.createElement("div");e.id="startScreen",e.style.cssText=`
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            text-align: center;
            z-index: 30;
            cursor: pointer;
        `,e.innerHTML=`
            <h2 style="margin: 0 0 20px 0; font-size: 24px;">üêç Snake</h2>
            <p style="margin: 0 0 30px 0; font-size: 16px; opacity: 0.8;">
                Click or tap to start<br>
                Use arrow keys or swipe to control
            </p>
            <div style="font-size: 14px; opacity: 0.6;">
                Desktop: Arrow keys or WASD<br>
                Mobile: Swipe to control
            </div>
        `;const t=document.getElementById("gameContainer");t&&t.appendChild(e);const i=()=>{this.isWaitingToStart=!1,this.lastMoveTime=Date.now(),e.style.display="none"};e.addEventListener("click",i),e.addEventListener("touchstart",i,{passive:!0})}update(e){if(this.isGameOver||this.isPaused||this.isWaitingToStart)return;const t=Date.now();t-this.lastMoveTime>this.gameSpeed&&(this.moveSnake(),this.lastMoveTime=t)}moveSnake(){const e=this.snake.move();if(e.x<0||e.x>=this.GRID_WIDTH||e.y<0||e.y>=this.GRID_HEIGHT){this.gameOver();return}if(this.snake.checkCollisionWithBody(e.x,e.y)){this.gameOver();return}e.x===this.food.x&&e.y===this.food.y&&(this.snake.grow(),this.spawnFood(),this.score+=1,this.updateUI(),this.score%50===0&&this.gameSpeed>50&&(this.gameSpeed-=10))}spawnFood(){let e,t;do e=Math.floor(Math.random()*this.GRID_WIDTH),t=Math.floor(Math.random()*this.GRID_HEIGHT);while(this.snake.checkCollision(e,t));this.food.setPosition(e,t)}gameOver(){this.isGameOver=!0,this.score>this.highScore&&(this.highScore=this.score,localStorage.setItem("snakeHighScore",this.highScore.toString()),this.updateUI()),this.showGameOver()}showGameOver(){const e=document.getElementById("gameOver"),t=document.getElementById("finalScore");e&&t&&(t.textContent=this.score.toString(),e.style.display="block")}togglePause(){this.isPaused=!this.isPaused,this.isPaused?this.showPauseMenu():this.hidePauseMenu()}showPauseMenu(){const e=document.getElementById("pauseMenu");e&&(e.style.display="block")}hidePauseMenu(){const e=document.getElementById("pauseMenu");e&&(e.style.display="none")}updateUI(){const e=document.getElementById("score"),t=document.getElementById("highScore");e&&(e.textContent=this.score.toString()),t&&(t.textContent=this.highScore.toString())}restart(){this.score=0,this.gameSpeed=150,this.isGameOver=!1,this.isPaused=!1,this.isWaitingToStart=!0,this.lastMoveTime=0,this.snake.reset(),this.spawnFood(),this.updateUI();const e=document.getElementById("gameOver");e&&(e.style.display="none"),this.hidePauseMenu();const t=document.getElementById("startScreen");t&&(t.style.display="flex")}resume(){this.isPaused=!1,this.hidePauseMenu()}destroy(){this.removeInputHandler&&this.removeInputHandler(),this.removeTouchHandler&&this.removeTouchHandler(),this.gameContainer&&this.gameContainer.parent&&this.gameContainer.parent.removeChild(this.gameContainer)}}let l=null,p=null;async function D(){const n=S();p=new E({width:n.gameWidth,height:n.gameHeight,backgroundColor:2899536,antialias:!0,resolution:window.devicePixelRatio||1});const e=document.getElementById("gameContainer");if(e){const t=p.view;t.style.width=`${n.gameWidth}px`,t.style.height=`${n.gameHeight}px`,t.style.maxWidth="100%",t.style.maxHeight="100%",e.appendChild(t)}l=new k(p),await l.init(),p.ticker.add(T)}function T(n){l&&l.update(n)}window.restartGame=()=>{l&&l.restart()};window.returnToMainMenu=()=>{window.location.href="/arcade/"};window.resumeGame=()=>{l&&l.resume()};window.togglePause=()=>{l&&l.togglePause()};window.addEventListener("load",D);
//# sourceMappingURL=snake-FedGEJd8.js.map
