var v=Object.defineProperty;var E=(a,t,i)=>t in a?v(a,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[t]=i;var e=(a,t,i)=>E(a,typeof t!="symbol"?t+"":t,i);import"./modulepreload-polyfill-B5Qt9EMX.js";import{C as f,G as C,T as M,a as F,A as y}from"./HTMLText-Kq75Vpr2.js";class g{constructor(t,i,s,h){e(this,"container");e(this,"emoji");e(this,"id");e(this,"isFlipped",!1);e(this,"isMatched",!1);e(this,"background");e(this,"emojiText");e(this,"width");e(this,"height");e(this,"isAnimating",!1);this.width=t,this.height=i,this.emoji=s,this.id=h,this.container=new f,this.container.eventMode="static",this.container.cursor="pointer",this.createCard(),this.setupInteraction()}createCard(){this.background=new C,this.background.beginFill(3447003),this.background.lineStyle(3,2719929),this.background.drawRoundedRect(0,0,this.width,this.height,10),this.background.endFill(),this.background.beginFill(6139362),this.background.drawRoundedRect(3,3,this.width-6,this.height-6,8),this.background.endFill(),this.container.addChild(this.background);const t=new M({fontFamily:"Arial",fontSize:36,fill:2899536,align:"center"});this.emojiText=new F(this.emoji,t),this.emojiText.anchor.set(.5),this.emojiText.position.set(this.width/2,this.height/2),this.emojiText.alpha=0,this.container.addChild(this.emojiText)}setupInteraction(){this.container.on("pointerdown",()=>{!this.isAnimating&&!this.isMatched&&window.onCardClick(this)}),this.container.on("pointerover",()=>{!this.isFlipped&&!this.isMatched&&!this.isAnimating&&this.container.scale.set(1.05)}),this.container.on("pointerout",()=>{!this.isFlipped&&!this.isMatched&&this.container.scale.set(1)})}setPosition(t,i){this.container.position.set(t,i)}flip(){this.isAnimating||(this.isAnimating=!0,this.isFlipped=!this.isFlipped,this.isFlipped?this.showEmoji():this.hideEmoji())}showEmoji(){this.container.scale.x=0,this.emojiText.alpha=1,this.background.clear(),this.background.beginFill(16777215),this.background.lineStyle(3,14737632),this.background.drawRoundedRect(0,0,this.width,this.height,10),this.background.endFill();const t=()=>{this.container.scale.x+=.2,this.container.scale.x>=1?(this.container.scale.x=1,this.isAnimating=!1):requestAnimationFrame(t)};t()}hideEmoji(){this.container.scale.x=0,this.emojiText.alpha=0,this.background.clear(),this.background.beginFill(3447003),this.background.lineStyle(3,2719929),this.background.drawRoundedRect(0,0,this.width,this.height,10),this.background.endFill(),this.background.beginFill(6139362),this.background.drawRoundedRect(3,3,this.width-6,this.height-6,8),this.background.endFill();const t=()=>{this.container.scale.x+=.2,this.container.scale.x>=1?(this.container.scale.x=1,this.isAnimating=!1):requestAnimationFrame(t)};t()}setMatched(){this.isMatched=!0,this.isFlipped=!0;const t=()=>{this.container.alpha-=.05,this.container.alpha>0?requestAnimationFrame(t):this.container.alpha=0};t()}reset(){this.isFlipped=!1,this.isMatched=!1,this.isAnimating=!1,this.container.alpha=1,this.container.scale.set(1),this.emojiText.alpha=0,this.background.clear(),this.background.beginFill(3447003),this.background.lineStyle(3,2719929),this.background.drawRoundedRect(0,0,this.width,this.height,10),this.background.endFill(),this.background.beginFill(6139362),this.background.drawRoundedRect(3,3,this.width-6,this.height-6,8),this.background.endFill()}}const u=800,p=600,r=80,d=100,w=4,c=6,o=10,I=["🐶","🐱","🐭","🐹","🐰","🦊","🐻","🐼","🐨","🐯","🦁","🐮","🍎","🍌","🍇","🍓","🍊","🍒","🍑","🍍","🍐","🍋","🥕","🥬","🥦","🌽","🥔","🍅","😂","🤠","🤡","🏀","🏈","⚽","🎾","🏓","🎵","🎤","🎹","🎺","🎻","🔥","⚡","💡"],P=w*c/2;function x(){return[...I].sort(()=>Math.random()-.5).slice(0,P)}const m=x();class R{constructor(t){e(this,"app");e(this,"gameContainer");e(this,"cards",[]);e(this,"flippedCards",[]);e(this,"matchedPairs",0);e(this,"moves",0);e(this,"startTime",0);e(this,"gameTime",0);e(this,"isGameOver",!1);e(this,"isPaused",!1);e(this,"canFlip",!0);e(this,"removeInputHandler");e(this,"gameStarted",!1);e(this,"flipTimeout");this.app=t,this.gameContainer=new f,this.app.stage.addChild(this.gameContainer)}async init(){this.createBackground(),this.createCards(),this.shuffleCards(),this.positionCards(),this.setupInput(),this.updateUI()}createBackground(){const t=new C;t.beginFill(3426654),t.drawRect(0,0,u,p),t.endFill(),this.gameContainer.addChild(t)}createCards(){for(let t=0;t<m.length;t++){const i=m[t],s=new g(r,d,i,t*2),h=new g(r,d,i,t*2+1);this.cards.push(s,h),this.gameContainer.addChild(s.container),this.gameContainer.addChild(h.container)}}shuffleCards(){for(let t=this.cards.length-1;t>0;t--){const i=Math.floor(Math.random()*(t+1));[this.cards[t],this.cards[i]]=[this.cards[i],this.cards[t]]}}positionCards(){const t=(u-(c*(r+o)-o))/2,i=(p-(w*(d+o)-o))/2;for(let s=0;s<this.cards.length;s++){const h=Math.floor(s/c),k=s%c,T=t+k*(r+o),b=i+h*(d+o);this.cards[s].setPosition(T,b)}}setupInput(){const t=i=>{if(!this.isGameOver)switch(i.key){case"Escape":i.preventDefault(),this.togglePause();break}};document.addEventListener("keydown",t),this.removeInputHandler=()=>{document.removeEventListener("keydown",t)}}update(t){this.isPaused||this.gameStarted&&!this.isGameOver&&(this.gameTime=Math.floor((Date.now()-this.startTime)/1e3),this.updateUI())}onCardClick(t){if(!(this.isPaused||this.isGameOver)&&!(t.isFlipped||t.isMatched)){if(this.gameStarted||(this.gameStarted=!0,this.startTime=Date.now()),this.flippedCards.length===2){this.flipTimeout&&(clearTimeout(this.flipTimeout),this.flipTimeout=void 0),this.flippedCards[0].flip(),this.flippedCards[1].flip(),this.flippedCards=[],this.canFlip=!0;return}t.flip(),this.flippedCards.push(t),this.flippedCards.length===2&&(this.moves++,this.canFlip=!1,this.flippedCards[0].emoji===this.flippedCards[1].emoji?(this.flippedCards[0].setMatched(),this.flippedCards[1].setMatched(),this.matchedPairs++,this.matchedPairs===m.length&&this.gameOver(),this.flippedCards=[],this.canFlip=!0):this.flipTimeout=setTimeout(()=>{this.flippedCards[0].flip(),this.flippedCards[1].flip(),this.flippedCards=[],this.canFlip=!0,this.flipTimeout=void 0},1e3),this.updateUI())}}gameOver(){this.isGameOver=!0,this.showGameOver()}showGameOver(){const t=document.getElementById("gameOver"),i=document.getElementById("finalMoves"),s=document.getElementById("finalTime");t&&i&&s&&(i.textContent=this.moves.toString(),s.textContent=this.formatTime(this.gameTime),t.style.display="block")}togglePause(){this.isPaused=!this.isPaused,this.isPaused?this.showPauseMenu():this.hidePauseMenu()}showPauseMenu(){const t=document.getElementById("pauseMenu");t&&(t.style.display="block")}hidePauseMenu(){const t=document.getElementById("pauseMenu");t&&(t.style.display="none")}updateUI(){const t=document.getElementById("moves"),i=document.getElementById("pairs"),s=document.getElementById("time");t&&(t.textContent=this.moves.toString()),i&&(i.textContent=this.matchedPairs.toString()),s&&(s.textContent=this.formatTime(this.gameTime))}formatTime(t){const i=Math.floor(t/60),s=t%60;return`${i.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`}restart(){this.matchedPairs=0,this.moves=0,this.gameTime=0,this.isGameOver=!1,this.isPaused=!1,this.canFlip=!0,this.gameStarted=!1,this.flippedCards=[],this.flipTimeout&&(clearTimeout(this.flipTimeout),this.flipTimeout=void 0),this.cards.forEach(i=>{i.reset()}),this.shuffleCards(),this.positionCards(),this.startTime=0,this.updateUI();const t=document.getElementById("gameOver");t&&(t.style.display="none"),this.hidePauseMenu()}resume(){this.isPaused=!1,this.hidePauseMenu()}destroy(){this.removeInputHandler&&this.removeInputHandler(),this.flipTimeout&&clearTimeout(this.flipTimeout),this.gameContainer&&this.gameContainer.parent&&this.gameContainer.parent.removeChild(this.gameContainer)}}let n=null,l=null;async function S(){l=new y({width:u,height:p,backgroundColor:2899536,antialias:!0,resolution:window.devicePixelRatio||1});const a=document.getElementById("gameContainer");a&&a.appendChild(l.view),n=new R(l),await n.init(),l.ticker.add(A)}function A(a){n&&n.update(a)}window.restartGame=()=>{n&&n.restart()};window.returnToMainMenu=()=>{window.location.href="/"};window.resumeGame=()=>{n&&n.resume()};window.onCardClick=a=>{n&&n.onCardClick(a)};window.addEventListener("load",S);
//# sourceMappingURL=memory-exlIs7UF.js.map
