var I=Object.defineProperty;var w=(h,e,i)=>e in h?I(h,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):h[e]=i;var t=(h,e,i)=>w(h,typeof e!="symbol"?e+"":e,i);import"./modulepreload-polyfill-B5Qt9EMX.js";import{C as l,G as m,A as E}from"./HTMLText-Kq75Vpr2.js";class G{constructor(e,i,s){t(this,"container");t(this,"segments",[]);t(this,"direction","right");t(this,"nextDirection","right");t(this,"gridSize");t(this,"gridWidth");t(this,"gridHeight");t(this,"graphics");this.gridSize=e,this.gridWidth=i,this.gridHeight=s,this.container=new l,this.graphics=new m,this.container.addChild(this.graphics),this.reset()}reset(){const e=Math.floor(this.gridWidth/2),i=Math.floor(this.gridHeight/2);this.segments=[{x:e,y:i},{x:e-1,y:i},{x:e-2,y:i}],this.direction="right",this.nextDirection="right",this.draw()}setDirection(e){this.direction==="up"&&e==="down"||this.direction==="down"&&e==="up"||this.direction==="left"&&e==="right"||this.direction==="right"&&e==="left"||(this.nextDirection=e)}move(){this.direction=this.nextDirection;const e=this.segments[0],i={x:e.x,y:e.y};switch(this.direction){case"up":i.y-=1;break;case"down":i.y+=1;break;case"left":i.x-=1;break;case"right":i.x+=1;break}return this.segments.unshift(i),this.segments.pop(),this.draw(),i}grow(){const e=this.segments[this.segments.length-1];this.segments.push({x:e.x,y:e.y})}checkCollision(e,i){return this.segments.some(s=>s.x===e&&s.y===i)}checkCollisionWithBody(e,i){return this.segments.slice(1).some(s=>s.x===e&&s.y===i)}draw(){this.graphics.clear(),this.segments.forEach((e,i)=>{const s=e.x*this.gridSize,d=e.y*this.gridSize;i===0?this.graphics.beginFill(3066993):this.graphics.beginFill(2600544),this.graphics.drawRoundedRect(s+1,d+1,this.gridSize-2,this.gridSize-2,3),this.graphics.endFill(),this.graphics.lineStyle(2,2267476,.8),this.graphics.drawRoundedRect(s+1,d+1,this.gridSize-2,this.gridSize-2,3),i===0&&this.drawEyes(s,d)})}drawEyes(e,i){let n,r,o,c;switch(this.direction){case"up":n=e+5,r=i+5,o=e+this.gridSize-5-3,c=i+5;break;case"down":n=e+5,r=i+this.gridSize-5-3,o=e+this.gridSize-5-3,c=i+this.gridSize-5-3;break;case"left":n=e+5,r=i+5,o=e+5,c=i+this.gridSize-5-3;break;case"right":n=e+this.gridSize-5-3,r=i+5,o=e+this.gridSize-5-3,c=i+this.gridSize-5-3;break}this.graphics.beginFill(0),this.graphics.drawCircle(n,r,3),this.graphics.drawCircle(o,c,3),this.graphics.endFill()}getHead(){return this.segments[0]}getLength(){return this.segments.length}}class k{constructor(e){t(this,"container");t(this,"x",0);t(this,"y",0);t(this,"graphics");t(this,"gridSize");t(this,"animationTime",0);this.gridSize=e,this.container=new l,this.graphics=new m,this.container.addChild(this.graphics)}setPosition(e,i){this.x=e,this.y=i,this.draw()}draw(){this.graphics.clear();const e=this.x*this.gridSize+this.gridSize/2,i=this.y*this.gridSize+this.gridSize/2,s=this.gridSize/2-2;this.graphics.beginFill(15158332),this.graphics.drawCircle(e,i,s),this.graphics.endFill(),this.graphics.lineStyle(2,12597547,.8),this.graphics.drawCircle(e,i,s),this.graphics.beginFill(16777215),this.graphics.drawCircle(e-s/3,i-s/3,s/4),this.graphics.endFill(),this.graphics.beginFill(2899536),this.graphics.drawEllipse(e+s/2,i-s/2,s/6,s/3),this.graphics.endFill()}update(e){this.animationTime+=e;const i=1+Math.sin(this.animationTime*.1)*.05;this.container.scale.set(i)}}const u=50,p=20,f=20,y=p*u,S=f*u;class D{constructor(e){t(this,"app");t(this,"gameContainer");t(this,"snake");t(this,"food");t(this,"score",0);t(this,"highScore",0);t(this,"gameSpeed",150);t(this,"lastMoveTime",0);t(this,"isGameOver",!1);t(this,"isPaused",!1);t(this,"removeInputHandler");t(this,"GRID_SIZE",u);t(this,"GRID_WIDTH",p);t(this,"GRID_HEIGHT",f);t(this,"GAME_WIDTH",y);t(this,"GAME_HEIGHT",S);this.app=e,this.gameContainer=new l,this.app.stage.addChild(this.gameContainer),this.highScore=parseInt(localStorage.getItem("snakeHighScore")||"0")}async init(){this.createBackground(),this.snake=new G(this.GRID_SIZE,this.GRID_WIDTH,this.GRID_HEIGHT),this.gameContainer.addChild(this.snake.container),this.food=new k(this.GRID_SIZE),this.gameContainer.addChild(this.food.container),this.spawnFood(),this.setupInput(),this.updateUI()}createBackground(){const e=new m;e.beginFill(3426654),e.drawRect(0,0,this.GAME_WIDTH,this.GAME_HEIGHT),e.endFill(),e.lineStyle(1,2899536,1);for(let i=0;i<=this.GRID_WIDTH;i++)e.moveTo(i*this.GRID_SIZE,0),e.lineTo(i*this.GRID_SIZE,this.GAME_HEIGHT);for(let i=0;i<=this.GRID_HEIGHT;i++)e.moveTo(0,i*this.GRID_SIZE),e.lineTo(this.GAME_WIDTH,i*this.GRID_SIZE);this.gameContainer.addChild(e)}setupInput(){const e=i=>{if(!this.isGameOver)switch(i.key){case"ArrowUp":case"w":case"W":i.preventDefault(),this.snake.setDirection("up");break;case"ArrowDown":case"s":case"S":i.preventDefault(),this.snake.setDirection("down");break;case"ArrowLeft":case"a":case"A":i.preventDefault(),this.snake.setDirection("left");break;case"ArrowRight":case"d":case"D":i.preventDefault(),this.snake.setDirection("right");break;case" ":case"Escape":i.preventDefault(),this.togglePause();break}};document.addEventListener("keydown",e),this.removeInputHandler=()=>{document.removeEventListener("keydown",e)}}update(e){if(this.isGameOver||this.isPaused)return;const i=Date.now();i-this.lastMoveTime>this.gameSpeed&&(this.moveSnake(),this.lastMoveTime=i)}moveSnake(){const e=this.snake.move();if(e.x<0||e.x>=this.GRID_WIDTH||e.y<0||e.y>=this.GRID_HEIGHT){this.gameOver();return}if(this.snake.checkCollisionWithBody(e.x,e.y)){this.gameOver();return}e.x===this.food.x&&e.y===this.food.y&&(this.snake.grow(),this.spawnFood(),this.score+=10,this.updateUI(),this.score%50===0&&this.gameSpeed>50&&(this.gameSpeed-=10))}spawnFood(){let e,i;do e=Math.floor(Math.random()*this.GRID_WIDTH),i=Math.floor(Math.random()*this.GRID_HEIGHT);while(this.snake.checkCollision(e,i));this.food.setPosition(e,i)}gameOver(){this.isGameOver=!0,this.score>this.highScore&&(this.highScore=this.score,localStorage.setItem("snakeHighScore",this.highScore.toString()),this.updateUI()),this.showGameOver()}showGameOver(){const e=document.getElementById("gameOver"),i=document.getElementById("finalScore");e&&i&&(i.textContent=this.score.toString(),e.style.display="block")}togglePause(){this.isPaused=!this.isPaused,this.isPaused?this.showPauseMenu():this.hidePauseMenu()}showPauseMenu(){const e=document.getElementById("pauseMenu");e&&(e.style.display="block")}hidePauseMenu(){const e=document.getElementById("pauseMenu");e&&(e.style.display="none")}updateUI(){const e=document.getElementById("score"),i=document.getElementById("highScore");e&&(e.textContent=this.score.toString()),i&&(i.textContent=this.highScore.toString())}restart(){this.score=0,this.gameSpeed=150,this.isGameOver=!1,this.isPaused=!1,this.lastMoveTime=Date.now(),this.snake.reset(),this.spawnFood(),this.updateUI();const e=document.getElementById("gameOver");e&&(e.style.display="none"),this.hidePauseMenu()}resume(){this.isPaused=!1,this.hidePauseMenu()}destroy(){this.removeInputHandler&&this.removeInputHandler(),this.gameContainer&&this.gameContainer.parent&&this.gameContainer.parent.removeChild(this.gameContainer)}}let a=null,g=null;async function H(){g=new E({width:y,height:S,backgroundColor:2899536,antialias:!0,resolution:window.devicePixelRatio||1});const h=document.getElementById("gameContainer");h&&h.appendChild(g.view),a=new D(g),await a.init(),g.ticker.add(v)}function v(h){a&&a.update(h)}window.restartGame=()=>{a&&a.restart()};window.returnToMainMenu=()=>{window.location.href="/"};window.resumeGame=()=>{a&&a.resume()};window.addEventListener("load",H);
//# sourceMappingURL=snake-1Z79W_2t.js.map
